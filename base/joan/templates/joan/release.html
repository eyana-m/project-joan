{% extends 'joan/base.html' %}
{% load extras %}

<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}{{  release  }}{% endblock %}</title>
</head>
<body>
  {% block pagecontent %}

<div class="container">

<h2>{{ release }}</h2>
Project: <a href="{% url 'joan:project' release.project.id %}">{{ release.project }}</a> <br>
<br>
Target Date: {{ release.release_target_date }}  <br>
UAT Start Date: {{ release.release_uat_start_date }} <br>
UAT End Date: {{ release.release_uat_end_date }}  <br>
Details: {{ release.release_details }}  <br>
</div>
<br>
<br>


<div class="container">

  <div class="panel-group" id="accordion">
      <div class="panel panel-default"> <!--RTM-->
          <div class="panel-heading">
              <h4 class="panel-title">
                  <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                      Requirements Traceability Matrix
                  </a>
              </h4>
          </div>
          <div id="collapseOne" class="panel-collapse collapse in">
              <div class="panel-body">
                <table class="table table-striped table-bordered">
                  <tr>
                    <th> ID </th>
                    <th> Requirement</th>
                    <th> Feature</th>

                  </tr>
                  {% for requirement in requirement_list %}
                  <tr>
                    {% if requirement.with_reqd_id %}
                    <td><small><a href="{% url 'joan:requirement' requirement.id %}">{{ requirement.reqd_id }}</a></small></td>
                    {% endif %}
                    <td class="col-md-6"><small><a href="{% url 'joan:requirement' requirement.id %}">{{ requirement }}</a></small></td>
                    {% if requirement.feature_set.count == 0 %}
                    <td></td>
                    {% else %}
                    <td style="padding: 0" class="col-md-6">

                      <table class="table table-borderless" style="margin-bottom:0;">

                        {% for feature in requirement.feature_set.all %} {% if feature.release.id is release.id %}
                        <tr class="table-borderless">
                          <td class="col-md-8"><small><small><a href="{% url 'joan:feature' feature.id %}">{{ feature }}</a><small></small></td>
                          <td class="col-md-2"><small><small><a href="{% url 'joan:release' feature.release.id %}">{{ feature.release }}</a><small></small></td>
                          <td class="col-md-2">{% show_feature_status feature %}</td>
                        </tr>
                        {% endif %} {% endfor %}
                      </table>
                    </td>
                    {% endif %}
                  </tr>
                  {% endfor %}
                </table>
              </div>
          </div>
      </div><!--RTM-->
      <div class="panel panel-default"> <!--RTM-->
          <div class="panel-heading">
              <h4 class="panel-title">
                  <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                      Related Features
                  </a>
              </h4>
          </div>
          <div id="collapseTwo" class="panel-collapse collapse">
              Hello
              </div>
          </div>
      </div><!--RTM-->
  </div>
  <!--end accordion panel-->

    <a class="btn btn-info" href="{% url 'joan:project' release.project.id %}">Home</a>
</div>

</div>

{% endblock %}
</body>
</html>
