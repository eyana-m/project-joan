{% load static %}
{# Load the tag library #}
{% load bootstrap3 %}

{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript %}


{# Display django.contrib.messages as Bootstrap alerts #}
{% bootstrap_messages %}


<link rel="stylesheet" type="text/css" href="{% static 'joan/style.css' %}" />
<script type="text/javascript" src="{% bootstrap_jquery_url %}">

</script>
<div class="container">

<h2>{{ release }}</h2>
<h3> Release Checklist </h3>
Project: <a href="{% url 'joan:project' release.project.id %}">{{ release.project }}</a> <br>
<br>
Target Date: {{ release.release_target_date }}  <br>
UAT Start Date: {{ release.release_uat_start_date }} <br>
UAT End Date: {{ release.release_uat_end_date }}  <br>
Details: {{ release.release_details }}  <br>
</div>
<br>
<br>



<div class="container">
  <h4>Requirements Traceability Matrix</h4>
  <table class="table table-striped table-bordered">
    <tr>
      <th> ID </th>
      <th> Requirement</th>
      <th> Feature</th>

    </tr>



      {% for requirement in requirement_list %}


      <tr>
        {% if requirement.with_reqd_id %}
          <td><small><a href="{% url 'joan:requirement' requirement.id %}">{{ requirement.reqd_id }}</a></small></td>
        {% endif %}
          <td class="col-md-6"><small><a href="{% url 'joan:requirement' requirement.id %}">{{ requirement }}</a></small></td>
          {% if requirement.feature_set.count == 0 %}
            <td></td>
          {% else %}
            <td style="padding: 0" class="col-md-6">

              <table class="table table-borderless" style="margin-bottom:0;">

                {% for feature in requirement.feature_set.all %}
                  {% if feature.release.id is release.id %}
                    <tr class="table-borderless">
                      <td><small><small><a href="{% url 'joan:feature' feature.id %}">{{ feature }}</a><small></small></td>
                      <td><small><small>{{ feature.release }}<small></small></td>
                      {% if feature.feature_status == 'NW' %}
                      <td><span class="label label-default"><small>{{ feature.get_feature_status_display }}</small></span></td>
                      {% elif feature.feature_status == 'DU' %}
                      <td><span class="label label-warning"><small>{{ feature.get_feature_status_display }}</small></span></td>
                      {% elif feature.feature_status == 'IP' %}
                      <td><span class="label label-info"><small>{{ feature.get_feature_status_display }}</small></span></td>
                      {% elif feature.feature_status == 'DO' %}
                      <td><span class="label label-success"><small>{{ feature.get_feature_status_display }}</small></span></td>
                      {% endif %}
                    </tr>
                  {% endif %}
                  {% endfor %}
              </table>
            </td>
          {% endif %}
      </tr>

      {% endfor %}



  </table>

</div>
</div>

</div>

<div class="container horizontal-scroll">

      <b>Related Features</b>
      <ul class="list-unstyled">

          {% for feature in release.feature_set.all %}
          <li><small><a href="{% url 'joan:feature' feature.id %}">{{ feature }}</a></small></li>

          {% endfor %}

        <br>
      </ul>



  </div>

  <a class="btn btn-info" href="{% url 'joan:project' release.project.id %}">Home</a>
</div>
